{% extends "layouts/main-rebrand.html" %}

{% block pageTitle %}
  History and notes - {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block header %}

  {{ govukHeader({
    productName: "Publisher",
    homepageUrl: "/index",
    serviceUrl: "/index",
    classes: "govuk-!-font-weight-bold",
    navigationClasses: "align-right",
    navigation: [
      {
          href: "#1",
          text: "Switch app"
      }
    ]
  }) }}

  {{ govukServiceNavigation({
    serviceUrl: "#",
    navigation: [
    {
      href: "my-content",
      text: "My content"
    },
    {
      href: "all-publications",
      text: "All publications"
    },
    {
      href: "2i-queue",
      text: "2i queue"
    },
    {
      href: "fact-check",
      text: "Fact check"
    },
    {
      href: "new-content",
      text: "New content"
    }
  ]
  }) }}

{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <span class="govuk-caption-xl"></span>
    <h1 class="govuk-heading-xl"></h1>

    <dl class="govuk-summary-list content-item-summary">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">Edition</dt>
        <dd class="govuk-summary-list__value" id="edition"></dd>
        <dd class="govuk-summary-list__actions govuk-summary-list__row--no-actions"></dd>
      </div>
      {% if data['status'] == "In review" %}
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">2i reviewer</dt>
          <dd class="govuk-summary-list__value" id="reviewer"></dd>
          <dd class="govuk-summary-list__actions">
            <a class="govuk-link govuk-link--no-visited-state" href="#"><span class="govuk-visually-hidden">2i reviewer</span></a>
          </dd>
        </div>
      {% elif data['status'] == "Fact check sent" %}
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">Sent out</dt>
          <dd class="govuk-summary-list__value" id="sent-out"></dd>
          <dd class="govuk-summary-list__actions govuk-summary-list__row--no-actions"></dd>
        </div>
      {% elif data['status'] == "Scheduled" %}
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">Scheduled for</dt>
          <dd class="govuk-summary-list__value" id="scheduled"></dd>
          <dd class="govuk-summary-list__actions govuk-summary-list__row--no-actions"></dd>
        </div>
      {% endif %}
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">Assigned to</dt>
        <dd class="govuk-summary-list__value" id="assignee"></dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link govuk-link--no-visited-state" href="#">Change<span class="govuk-visually-hidden"> assignee</span></a>
        </dd>
      </div>
    </dl>
    
</div>

  <div class="govuk-grid-column-full">
    <nav class="moj-sub-navigation" aria-label="Sub navigation">
      <ul class="moj-sub-navigation__list">
        <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" href="content-item-edit">Edit</a></li>
        <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" href="content-item-tagging">Tagging</a></li>
        <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" href="content-item-metadata">Metadata</a></li>
        <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" aria-current="page" href="content-item-history-and-notes">History and notes</a></li>
        <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" href="content-item-admin">Admin</a></li>
        <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" href="content-item-related-external-links">Related external links</a></li>
        {% if data['status'] == "Published" %}
          <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" href="content-item-unpublish">Unpublish</a></li>
        {% endif %}
      </ul>
    </nav>
  </div>

  <div class="govuk-grid-column-full">
    <h2 class="govuk-heading-l">History and notes</h2>
  </div>

  <div class="govuk-grid-column-two-thirds">
    {% from "govuk/components/accordion/macro.njk" import govukAccordion %}

    {{ govukAccordion({
      id: "accordion-history-and-notes",
      rememberExpanded: false,
      items: [
        {
          heading: {
            text: "Edition 2"
          },
          content: {
            html: 
            
              ('<p class="govuk-body">10:33am, 27 February 2025</br><span class="govuk-!-font-weight-bold">2i claimed by ' + data['assign-2i-reviewer'] + '</span></p>' if data['assign-2i-reviewer'])
              
              + '
                <p class="govuk-body">
                    8:21am, 3 February 2025</br>
                    <span class="govuk-!-font-weight-bold">2i requested</span> by Requestor
                </p>
                <div class="govuk-inset-text">
                    Changing "Land Registry" to "HM Land Registry", and editing uses of "eg"</br></br>
                    Changed all instances of "Land Registry" to "HM Land Registry".</br></br>
                    ALSO:</br></br>
                    Deleted answer summary markdown</br>
                    CHANGED</br>
                    $!You can ask for publicly owned land or buildings to be sold if you think they’re vacant or underused.$!</br>
                    TO</br>
                    You can ask for publicly owned land or buildings to be sold if you think they’re vacant or underused.
                </div>
                <p class="govuk-body">
                    1:46pm, 27 January 2025</br>
                    <span class="govuk-!-font-weight-bold">Assigned</span> to Assignee
                </p>
                <p class="govuk-body">
                    1:45pm, 27 January 2025</br>
                    <span class="govuk-!-font-weight-bold">Created</span> by Creator
                </p>
              '
          },
          expanded: true
        },
        {
          heading: {
            text: "Edition 1"
          },
          content: {
            html: '<p class="govuk-body">To-do.</p>'
          }
        }
      ]
    }) }}
  </div>

  <div class="govuk-grid-column-one-third sticky options-sidebar">
    <div class="actions-sidebar">
      <button type="submit" data-prevent-double-click="true" class="govuk-button wide" data-module="govuk-button">Add edition note</button>
      <button type="submit" class="govuk-button govuk-button--secondary wide" data-module="govuk-button">Add important note</button>
    </div>
  </div>

</div>

{% endblock %}

{% block footer %}

{% from "govuk/components/footer/macro.njk" import govukFooter %}

{{ govukFooter({
  navigation: [
    {
      title: "Admin pages",
      width: "one-third",
      columns: 1,
      items: [
        {
          href: "#",
          text: "CSV reports"
        },
        {
          href: "#",
          text: "Downtime messages"
        },
        {
          href: "#",
          text: "Search users"
        }
      ]
    },
    {
      title: "Support and feedback",
      width: "two-thirds",
      items: [
        {
          href: "#",
          text: "Raise a support request"
        },
        {
          href: "#",
          text: "Check if publishing apps are working or if there’s any maintenance planned"
        },
        {
          href: "#",
          text: "How to write, publish, and improve content"
        }
      ]
    }
  ]
}) }}

{% endblock %}

{% block pageScripts %}
  <script src="/public/javascripts/content-item.js"></script>
{% endblock %}