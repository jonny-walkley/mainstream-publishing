{% extends "layouts/main-rebrand.html" %}

{% block pageTitle %}
  History and notes - {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block header %}

  {{ govukHeader({
    productName: "Publisher",
    homepageUrl: "/index",
    serviceUrl: "/index",
    classes: "govuk-!-font-weight-bold",
    navigationClasses: "align-right",
    navigation: [
      {
          href: "#1",
          text: "Switch app"
      }
    ]
  }) }}

  {{ govukServiceNavigation({
    serviceUrl: "#",
    navigation: [
    {
      href: "my-content",
      text: "My content"
    },
    {
      href: "all-publications",
      text: "All publications"
    },
    {
      href: "2i-queue",
      text: "2i queue"
    },
    {
      href: "fact-check",
      text: "Fact check"
    },
    {
      href: "new-content",
      text: "New content"
    }
  ]
  }) }}

{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <span class="govuk-caption-xl"></span>
    <h1 class="govuk-heading-xl"></h1>

    <dl class="govuk-summary-list content-item-summary">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">Edition</dt>
        <dd class="govuk-summary-list__value" id="edition"></dd>
        <dd class="govuk-summary-list__actions govuk-summary-list__row--no-actions"></dd>
      </div>
      {% if data['status'] == "In review" %}
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">2i reviewer</dt>
          <dd class="govuk-summary-list__value" id="reviewer"></dd>
          <dd class="govuk-summary-list__actions">
            <a class="govuk-link govuk-link--no-visited-state" id="reviewer-link" href="#">Change<span class="govuk-visually-hidden">2i reviewer</span></a>
          </dd>
        </div>
      {% elif data['status'] == "Fact check sent" %}
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">Sent out</dt>
          <dd class="govuk-summary-list__value" id="sent-out"></dd>
          <dd class="govuk-summary-list__actions govuk-summary-list__row--no-actions"></dd>
        </div>
      {% elif data['status'] == "Scheduled" %}
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">Scheduled for</dt>
          <dd class="govuk-summary-list__value" id="scheduled"></dd>
          <dd class="govuk-summary-list__actions govuk-summary-list__row--no-actions"></dd>
        </div>
      {% endif %}
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">Assigned to</dt>
        <dd class="govuk-summary-list__value" id="assignee"></dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link govuk-link--no-visited-state" href="#">Change<span class="govuk-visually-hidden"> assignee</span></a>
        </dd>
      </div>
    </dl>
    
</div>

  <div class="govuk-grid-column-full">
    <nav class="moj-sub-navigation" aria-label="Sub navigation">
      <ul class="moj-sub-navigation__list">
        <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" href="content-item-edit">Edit</a></li>
        <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" href="content-item-tagging">Tagging</a></li>
        <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" href="content-item-metadata">Metadata</a></li>
        <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" aria-current="page" href="content-item-history-and-notes">History and notes</a></li>
        <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" href="content-item-admin">Admin</a></li>
        <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" href="content-item-related-external-links">Related external links</a></li>
        {% if data['status'] == "Published" %}
          <li class="moj-sub-navigation__item"><a class="moj-sub-navigation__link" href="content-item-unpublish">Unpublish</a></li>
        {% endif %}
      </ul>
    </nav>
  </div>

  <div class="govuk-grid-column-full">
    <h2 class="govuk-heading-l">History and notes</h2>
  </div>

  <div class="govuk-grid-column-two-thirds">
    
    <div id="important-note" style="display: none;">

      {% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}

      {% set html %}
        <q class="govuk-body" id="important-note-body">
          
        </q>
      {% endset %}

      {{ govukNotificationBanner({
        html: html,
        titleText: "Important note"
      }) }}

    </div>

    <!-- <h3 class="govuk-heading-m" id="current-edition">Edition </h3> -->

    <!-- <div id="history-and-notes" class="govuk-!-margin-bottom-6"> -->

    <!-- <p class="govuk-body">
      <a href="#" class="govuk-link--no-visited-state compare-edition" id="current-edition-compare">Compare with Edition </a>
    </p> -->
  
  <!-- </div> -->

    {% from "govuk/components/accordion/macro.njk" import govukAccordion %}

    {{ govukAccordion({
      id: "accordion-history-and-notes",
      rememberExpanded: false,
      items: [
      {
        heading: {
          html: "<span id='current-edition'>Edition </span>"
        },
        content: {
          html: '
          
          <p class="govuk-body compare-edition">
            <a href="#" class="govuk-link--no-visited-state" id="current-edition-compare">Compare with Edition </a>
          </p>
          
          <div id="fact-check-response">
    
            <p class="govuk-body">
              <time>2:02pm, 6 Aug 2025</time>
              <span class="govuk-!-font-weight-bold">Fact check received</span> by GOV.UK Bot
            </p>
          
            <div class="govuk-inset-text fact-check-response">
              <p>Hi,</p>
              <p>We have reviewed the proposed changes and have the following issue:</p>
              <p>There is a reference to the ‘patent register’ we are not able to call it a register due to legal constraints, it needs to be referred to as ‘search for a patent service’ instead.</p>
              <p>If you have any questions please ask</p>
              <p>Thanks</p>
              <p>Jane</p>
              <p>
                From: GOV.UK Publishing <gov.uk.publishing@notifications.service.gov.uk></br>
                Sent: Wednesday, January 8, 2025 1:40 PM</br>
                To: Jane Doe <jane.doe@example.email.gov.uk></br>
                Subject: ‘[Check the patents journal]’ GOV.UK preview of new edition
              </p>
              <p>Hi,</p>
              <p>We need you to check the factual accuracy of changes made to ‘Check the patents journal’ before it’s published on GOV.​UK.</p>
              <p>The GOV.​UK Content Team made the changes because of the new digital service #5893029. Deadline: 16 January 2025 (5 working days)...</p>
              <a href="#" class="govuk-link govuk-link--no-visited-state govuk-!-font-weight-bold">Show earlier messages</a>
            </div>
          </div>

          <div id="review-requested" style="display: none;">

            <div id="claimed-by" style="display: none;">
              <p class="govuk-body">
                <time>10:16am, 3 Aug 2025</time>
                <span class="govuk-!-font-weight-bold">2i claimed</span> by <span class="claimed-by-name"></span>
              </p>
            </div>
            
            <p class="govuk-body">
              <time>8:21am, 3 Aug 2025</time>
              <span class="govuk-!-font-weight-bold">2i requested</span> by <span class="assignee"></span>
            </p>
            
            <div class="govuk-inset-text">
              Changing "Land Registry" to "HM Land Registry", and editing uses of "eg"</br></br>
              Changed all instances of "Land Registry" to "HM Land Registry".</br></br>
              ALSO:</br></br>
              Deleted answer summary markdown</br>
              CHANGED</br>
              $!You can ask for publicly owned land or buildings to be sold if you think they’re vacant or underused.$!</br>
              TO</br>
              You can ask for publicly owned land or buildings to be sold if you think they’re vacant or underused.
            </div>
          
          </div>
        
          <p class="govuk-body">
            <time>1:46pm, 27 Jul 2025</time>
            <span class="govuk-!-font-weight-bold">Assigned</span> to <span class="assignee"></span>
          </p>
        
          <p class="govuk-body">
            <time>1:46pm, 27 Jul 2025</time>
            <span class="govuk-!-font-weight-bold" id="first-event">New edition</span> by <span class="assignee"></span>
          </p>
          
          '
        },
        expanded: true
      }
      ]
    }) }}
  </div>

  <div class="govuk-grid-column-one-third sticky options-sidebar">
    <div class="actions-sidebar">

      {% from "govuk/components/button/macro.njk" import govukButton %}

      {{ govukButton({
        id: "edition-note",
        text: "Add edition note",
        classes: "govuk-button wide",
        href: "#"
      }) }}

      {{ govukButton({
        id: "important-note-button",
        text: "Add important note",
        classes: "govuk-button--secondary wide",
        href: "#"
      }) }}
      
      {% if (data['status'] == "Draft") or (data['status'] == "Amends needed") %}
        {{ govukButton({
          id: "send-to-2i",
          text: "2i",
          classes: "govuk-button--secondary wide",
          href: "#"
        }) }}
      {% elif data['status'] == "In review" %}
        <button type="submit" class="govuk-button govuk-button--secondary wide" data-module="govuk-button" id="skip">Skip 2i</button>
      {% endif %}
    
    </div>
  </div>

</div>

{% endblock %}

{% block footer %}

{% from "govuk/components/footer/macro.njk" import govukFooter %}

{{ govukFooter({
  navigation: [
    {
      title: "Reports, downtime and users",
      width: "one-third",
      columns: 1,
      items: [
        {
          href: "#",
          text: "CSV reports"
        },
        {
          href: "#",
          text: "Downtime messages"
        },
        {
          href: "#",
          text: "Search users"
        }
      ]
    },
    {
      title: "Support and feedback",
      width: "two-thirds",
      items: [
        {
          href: "#",
          text: "Raise a support request"
        },
        {
          href: "#",
          text: "Check if publishing apps are working or if there’s any maintenance planned"
        },
        {
          href: "#",
          text: "How to write, publish, and improve content"
        }
      ]
    }
  ]
}) }}

{% endblock %}

{% block pageScripts %}
  <script src="/public/javascripts/content-item.js"></script>
{% endblock %}